<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login and Registration Forms</title>
</head>
<body>
    <h1>Login</h1>
    <form id="login">
        <label for="login-email">Email:</label>
        <input type="email" id="login-email" name="email" required><br>

        <label for="login-password">Password:</label>
        <input type="password" id="login-password" name="password" required><br>

        <button type="submit">Login</button>
    </form>
    <br>
    <h1>Registration</h1>
    <form id="register">
        <label for="register-username">Username:</label>
        <input type="text" id="register-username" name="username" required><br>

        <label for="register-email">Email:</label>
        <input type="email" id="register-email" name="email" required><br>

        <label for="register-password">Password:</label>
        <input type="password" id="register-password" name="password" required><br>

        <button type="submit">Register</button>
    </form>
    <br>
    <h1>Surfboards</h1>
    <form id="fetchDataForm">
        <button type="submit">show surfboards</button>
    </form>

    <div id="dataContainer"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script>

        $(document).ready(() => {

            $('#register').submit((event) => {

                event.preventDefault(); // Prevent form submission
                $.ajax({

                    url: '/auth/register',
                    method: 'POST',
                    data: $('#register').serialize(),
                    success: (response) => {

                        const { redirectUrl } = response;
                        window.location.href = redirectUrl;
                    },
                    error: (error) => {
                        console.log('Error:', error);
                    }
                });
            });

            $('#login').submit((event) => {

                event.preventDefault(); // Prevent form submission
                $.ajax({

                    url: '/auth/login',
                    method: 'POST',
                    data: $('#login').serialize(),
                    success: (response) => {

                        const { redirectUrl } = response;
                        window.location.href = redirectUrl;
                    },
                    error: (error) => {
                        console.log('Error:', error);
                    }
                });
            });

            // write all surfboards below the button
            $('#fetchDataForm').submit((event) => {

                event.preventDefault(); // Prevent form submission
                $.ajax({

                    url: '/surfboards',
                    method: 'GET',
                    success: (response) => {

                        const { surfboards } = response;
                        $('#dataContainer').html(surfboards[0].company + ', ' + surfboards[0].model);
                    },
                    error: (error) => {
                        console.log('Error:', error);
                    }
                });
            });
        });
    </script>
</body>
</html>
